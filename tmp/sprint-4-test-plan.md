# Sprint 4 Test Plan: Event Participation & Working Group Management

**Version:** 1.0
**Date:** {{YYYY-MM-DD}}

## 1. Introduction

This document outlines the test plan for Sprint 4, which focuses on implementing features for event participation (volunteer self-signup, admin assignment) and the initial CRUD operations for working groups, including member assignments.

## 2. Prerequisites

*   **P.1:** Application deployed and accessible (frontend and backend).
*   **P.2:** At least three users created with distinct roles:
    *   `SysAdminUser`: Has `sysadmin` role with all privileges.
    *   `EventManagerUser`: Has a custom role with privileges:
        *   `events:create`, `events:view`, `events:edit`, `events:delete`, `events:manage_assignments`
        *   `working_groups:create`, `working_groups:view`, `working_groups:edit`, `working_groups:delete`, `working_groups:manage_assignments` (or equivalent admin privileges for working groups).
    *   `VolunteerUser`: Has a basic role with no special administrative privileges (can only self-signup/withdraw).
*   **P.3:** At least one event created by `SysAdminUser` or `EventManagerUser` with status "open_for_signup" (e.g., `Event Alpha (Open)`).
*   **P.4:** At least one event created by `SysAdminUser` or `EventManagerUser` with status "draft" (e.g., `Event Beta (Draft)`).

## 3. Test Cases

### 3.1 Event Participation

| Test Case ID | Description                                                                 | User Role        | Steps                                                                                                                                                                                                                            | Expected Result                                                                                                                                  | Status     |
| :----------- | :-------------------------------------------------------------------------- | :--------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------- | :--------- |
| **EP.1**     | Volunteer self-signup for an "open_for_signup" event.                       | `VolunteerUser`  | 1. Log in as `VolunteerUser`. <br> 2. Navigate to `Event Alpha (Open)` detail page. <br> 3. Click "Sign Up".                                                                                                                   | 1. Signup successful. <br> 2. UI updates to show "You are signed up" and "Withdraw Signup" button. <br> 3. Backend `assignments` record created. | Pending    |
| **EP.2**     | Volunteer withdraws from an event they signed up for.                       | `VolunteerUser`  | 1. (After EP.1) Log in as `VolunteerUser`. <br> 2. Navigate to `Event Alpha (Open)` detail page. <br> 3. Click "Withdraw Signup".                                                                                             | 1. Withdrawal successful. <br> 2. UI updates to show "Sign Up" button. <br> 3. Backend `assignments` record deleted/status updated.             | Pending    |
| **EP.3**     | Volunteer attempts to sign up for a "draft" (not open) event.               | `VolunteerUser`  | 1. Log in as `VolunteerUser`. <br> 2. Navigate to `Event Beta (Draft)` detail page.                                                                                                                                             | 1. "Sign Up" button is not visible or is disabled. <br> 2. If somehow attempted, API call should fail.                                          | Pending    |
| **EP.4**     | Volunteer attempts to sign up for an event they are already signed up for.    | `VolunteerUser`  | 1. (After EP.1) Log in as `VolunteerUser`. <br> 2. Navigate to `Event Alpha (Open)` detail page. <br> 3. (If UI allows) Attempt to click "Sign Up" again or trigger signup.                                                 | 1. UI should not allow re-signup (button should be "Withdraw"). <br> 2. If API called directly, backend returns 409 Conflict.                       | Pending    |
| **EP.5**     | Admin lists assignments for an event.                                       | `EventManagerUser` | 1. (After EP.1) Log in as `EventManagerUser`. <br> 2. Navigate to `Event Alpha (Open)` detail page. <br> 3. View the "Assigned Volunteers" section.                                                                          | 1. `VolunteerUser` is listed as assigned. <br> 2. Correct assignment details displayed.                                                          | Pending    |
| **EP.6**     | Admin assigns another user (e.g., a new `VolunteerUser2`) to an event.      | `EventManagerUser` | 1. Log in as `EventManagerUser`. <br> 2. Navigate to `Event Alpha (Open)` detail page. <br> 3. Use the "Assign Volunteer" form, enter UID of `VolunteerUser2`. <br> 4. Click "Assign".                                          | 1. Assignment successful. <br> 2. `VolunteerUser2` appears in the "Assigned Volunteers" list. <br> 3. Backend `assignments` record created.       | Pending    |
| **EP.7**     | Admin removes an assigned volunteer from an event.                          | `EventManagerUser` | 1. (After EP.6) Log in as `EventManagerUser`. <br> 2. Navigate to `Event Alpha (Open)` detail page. <br> 3. Find `VolunteerUser2` in the list. <br> 4. Click "Remove" for `VolunteerUser2`. <br> 5. Confirm removal. | 1. Removal successful. <br> 2. `VolunteerUser2` is no longer in the list. <br> 3. Backend `assignments` record deleted.                         | Pending    |
| **EP.8**     | `VolunteerUser` attempts to access admin assignment features on event page. | `VolunteerUser`  | 1. Log in as `VolunteerUser`. <br> 2. Navigate to `Event Alpha (Open)` detail page.                                                                                                                                             | 1. "Assign Volunteer" form and "Remove" buttons for other users are not visible.                                                                 | Pending    |
| **EP.9**     | Admin updates an assignment (e.g., status, notes - if UI supports this sprint). | `EventManagerUser` | 1. (After EP.6) Log in as `EventManagerUser`. <br> 2. Navigate to `Event Alpha (Open)` detail page. <br> 3. (If UI allows) Find `VolunteerUser2`, click "Edit Assignment". <br> 4. Change status/notes. <br> 5. Save. | 1. Update successful. <br> 2. List reflects changes. <br> 3. Backend `assignments` record updated. (Note: UI for this might be in a later sprint) | Pending    |

### 3.2 Working Group Management

| Test Case ID | Description                                                              | User Role        | Steps                                                                                                                                                                                                                                                           | Expected Result                                                                                                                                                              | Status     |
| :----------- | :----------------------------------------------------------------------- | :--------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------- |
| **WG.1**     | Admin creates a new working group.                                       | `EventManagerUser` | 1. Log in as `EventManagerUser`. <br> 2. Navigate to "Working Groups" admin page. <br> 3. Click "New Working Group". <br> 4. Fill in Group Name (e.g., "WG Alpha"), Description, Status (active). <br> 5. Submit.                                              | 1. Creation successful. <br> 2. Redirected to WG list or WG detail page. <br> 3. "WG Alpha" appears in the list. <br> 4. Backend `workingGroups` record created.                 | Pending    |
| **WG.2**     | Admin lists all working groups.                                          | `EventManagerUser` | 1. (After WG.1) Log in as `EventManagerUser`. <br> 2. Navigate to "Working Groups" admin page.                                                                                                                                                                 | 1. "WG Alpha" is listed with correct details (name, status).                                                                                                                 | Pending    |
| **WG.3**     | Admin views details of a specific working group.                         | `EventManagerUser` | 1. (After WG.1) Log in as `EventManagerUser`. <br> 2. From the WG list, navigate to "WG Alpha" detail page.                                                                                                                                                   | 1. Correct details for "WG Alpha" are displayed (name, description, status, creator).                                                                                        | Pending    |
| **WG.4**     | Admin updates an existing working group.                                 | `EventManagerUser` | 1. (After WG.1) Log in as `EventManagerUser`. <br> 2. Navigate to "WG Alpha" detail/edit page. <br> 3. Change Description to "Updated Description", Status to "archived". <br> 4. Save.                                                                      | 1. Update successful. <br> 2. Detail page shows updated info. <br> 3. List page (if refreshed) shows updated status. <br> 4. Backend record updated.                             | Pending    |
| **WG.5**     | Admin assigns a user (e.g., `VolunteerUser`) to a working group.         | `EventManagerUser` | 1. (After WG.1) Log in as `EventManagerUser`. <br> 2. Navigate to "WG Alpha" detail page. <br> 3. Use "Assign User" form, enter UID of `VolunteerUser`. <br> 4. Click "Assign".                                                                               | 1. Assignment successful. <br> 2. `VolunteerUser` appears in the member list for "WG Alpha". <br> 3. Backend `assignments` record created (type: "workingGroup").                 | Pending    |
| **WG.6**     | Admin lists members of a working group.                                  | `EventManagerUser` | 1. (After WG.5) Log in as `EventManagerUser`. <br> 2. Navigate to "WG Alpha" detail page. <br> 3. View the "Current Members" section.                                                                                                                        | 1. `VolunteerUser` is listed as a member.                                                                                                                                    | Pending    |
| **WG.7**     | Admin removes an assigned user from a working group.                     | `EventManagerUser` | 1. (After WG.5) Log in as `EventManagerUser`. <br> 2. Navigate to "WG Alpha" detail page. <br> 3. Find `VolunteerUser` in the member list. <br> 4. Click "Remove". <br> 5. Confirm.                                                                         | 1. Removal successful. <br> 2. `VolunteerUser` is no longer in the member list. <br> 3. Backend `assignments` record deleted.                                                 | Pending    |
| **WG.8**     | Admin deletes a working group.                                           | `EventManagerUser` | 1. Create a new temporary WG (e.g., "WG ToDelete") and assign a user to it. <br> 2. Log in as `EventManagerUser`. <br> 3. Navigate to "WG ToDelete" detail/edit page or list page. <br> 4. Click "Delete Working Group". <br> 5. Confirm. | 1. Deletion successful. <br> 2. "WG ToDelete" is removed from the list. <br> 3. Backend `workingGroups` record deleted. <br> 4. Associated assignment record also deleted. | Pending    |
| **WG.9**     | `VolunteerUser` attempts to access WG creation page.                     | `VolunteerUser`  | 1. Log in as `VolunteerUser`. <br> 2. Attempt to navigate directly to `/dashboard/admin/working-groups/new`.                                                                                                                                   | 1. Access denied. User redirected or sees an error message.                                                                                                                  | Pending    |
| **WG.10**    | `VolunteerUser` attempts to access WG detail page with member management.  | `VolunteerUser`  | 1. Log in as `VolunteerUser`. <br> 2. Attempt to navigate to `/dashboard/admin/working-groups/{WG_Alpha_ID}`.                                                                                                                                 | 1. If WG detail is viewable by all, page loads but member management tools (assign/remove) are not visible. <br> 2. If WG detail is admin-only, access denied.                | Pending    |

## 4. Test Environment

*   **Backend URL:** `NEXT_PUBLIC_BACKEND_URL` (as configured)
*   **Frontend URL:** Local development server (e.g., `http://localhost:3002`) or deployed URL.
*   **Browsers:** Latest Chrome/Firefox.
*   **Database:** Firestore emulator or development GCP project.

## 5. Test Data

*   **Users:** `SysAdminUser`, `EventManagerUser`, `VolunteerUser`, `VolunteerUser2` (UIDs will be needed for assignments).
*   **Events:** `Event Alpha (Open)`, `Event Beta (Draft)`.
*   **Working Groups:** Created dynamically during tests (e.g., "WG Alpha", "WG ToDelete").

## 6. Reporting

*   Test status (Pass/Fail/Blocked) will be updated in this document.
*   Bugs found will be reported with steps to reproduce, expected vs. actual results.